
<form class="" role="form" name="search-agent">
    <input type="text" ng-model="asyncSearch" placeholder="Enter employee number or first name or last name"
            uib-typeahead="agent as agent.name for agent in getUsers($viewValue) | limitTo:8"
            typeahead-wait-ms="1000" ng-model-options="modelOptions"
            typeahead-loading="loadingUsers" class="form-control"
            typeahead-no-results="noResults" typeahead-min-length="3"
            typeahead-template-url="userTemplate.html" typeahead-show-hint="true"
            typeahead-on-select="onSelect($item, $model, $label, $event)"
            ng-pattern="/^[a-zA-Z0-9]+$/" required>
    <i ng-show="loadingUsers" class="glyphicon glyphicon-refresh"></i>
    <div ng-show="noResults">
        <i class="glyphicon glyphicon-remove"></i> No Results Found
    </div>
</form>

<script type="text/ng-template" id="userTemplate.html">
    <a tabindex="2" class="uib-typeahead-match" ng-click="selectMatch()">
        <span style="display:block;"
            ng-bind-html="match.model.name | uibTypeaheadHighlight:query">
        </span>
        <span ng-bind-html="match.model.username | uibTypeaheadHighlight:query"></span>&nbsp;&nbsp;
        <span class="label" ng-class="{ 'label-success':match.model.active, 'label-default':!match.model.active }">
            <span ng-show="match.model.active">Enabled</span>
            <span ng-show="!match.model.active">Disabled</span>
        </span>
    </a>
</script>
